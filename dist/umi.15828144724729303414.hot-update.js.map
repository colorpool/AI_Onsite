{"version":3,"sources":["umi.15828144724729303414.hot-update.js","src/components/TabBar/TabBarWrapper.tsx"],"sourcesContent":["globalThis.makoModuleHotUpdate(\n  'src/.umi/umi.ts?hmr',\n  {\n    modules: {},\n  },\n  function (runtime) {\n    runtime._h='14456662502504596316';\nruntime.updateEnsure2Map({\"src/.umi/core/EmptyRoute.tsx\":[\"src/.umi/core/EmptyRoute.tsx\"],\"src/.umi/plugin-layout/Layout.tsx\":[\"vendors\",\"src/.umi/plugin-layout/Layout.tsx\"],\"src/.umi/plugin-openapi/openapi.tsx\":[\"vendors\",\"src/.umi/plugin-openapi/openapi.tsx\"],\"src/pages/404.tsx\":[\"p__404\"],\"src/pages/CustomerSuccess/index.tsx\":[\"p__CustomerSuccess__index\"],\"src/pages/agents/index.tsx\":[\"p__agents__index\"],\"src/pages/user/login/index.tsx\":[\"p__user__login__index\"]});;\n  },\n);\n","import React, { useEffect } from 'react';\nimport { useLocation } from '@umijs/max';\nimport TabBar, { TabItem } from './index';\nimport { useTabManager } from '@/contexts/TabContext';\nimport NotificationBar from '../NotificationBar';\n\n// 路由到Tab标题的映射\nconst routeToTitleMap: Record<string, string> = {\n  '/dashboard/work': '我的工作看板',\n  '/dashboard/layers': '客户分层盘点',\n  '/dashboard/focus': '近期客户关注重点',\n  '/dashboard/competition': '客成部门大比武',\n  '/dashboard/coordination': '大服务体系内协同',\n  '/profiles/handover': '客户交接',\n  '/profiles/implementation': '实施搭建',\n  '/profiles/service': '持续服务',\n  '/profiles/renewal': '续约管理',\n  '/profiles/recall': '召回孵化',\n  '/profiles/churn': '流失归因',\n  '/revenue/consultation': '咨询应答',\n  '/revenue/upgrade': '定制升舱建议',\n  '/revenue/learning': '学习项目推荐',\n  '/revenue/purchase': '课程采购活动',\n  '/revenue/alliance': '战略活动结盟',\n  '/revenue/message': '消息推送管理',\n  '/resources/deployment': '实施部署套件',\n  '/resources/support': '年度服务支撑',\n  '/resources/equipment': '续约升级装备',\n  '/resources/knowledge': '团队能力建设',\n  '/ai-tools/consultant': '实施顾问分身',\n  '/ai-tools/simulator': '续费模拟器',\n  '/ai-tools/communication': '干系人沟通话术',\n  '/ai-tools/travel': '面客差旅行程表',\n  '/ai-tools/prediction': '预测水晶球',\n  '/ai-tools/avatar': '我的虚拟分身',\n  '/ai-tools/tags': '智能标签在干活',\n  '/user/login': '登录',\n  '/user/register': '注册',\n  '/user/register-result': '注册结果',\n  '/404': '404',\n};\n\nconst TabBarWrapper: React.FC = React.memo(() => {\n  const location = useLocation();\n  const { tabs, activeKey, addTab, removeTab, setActiveTab } = useTabManager();\n\n  // 根据当前路径自动添加Tab\n  useEffect(() => {\n    const currentPath = location.pathname;\n    \n    // 跳过根路径，不创建首页标签\n    if (currentPath === '/') {\n      return;\n    }\n    \n    // 检查是否是子页面（配置、分析、新建），这些页面不创建新Tab\n    const isSubPage = currentPath.includes('/ai-tools/consultant/') && \n                     currentPath !== '/ai-tools/consultant';\n    \n    if (isSubPage) {\n      // 子页面不创建新Tab，直接导航到主页面Tab\n      const mainTab = tabs.find(tab => tab.path === '/ai-tools/consultant');\n      if (mainTab && activeKey !== mainTab.key) {\n        setActiveTab(mainTab.key);\n      }\n      return;\n    }\n    \n    const title = routeToTitleMap[currentPath] || '未知页面';\n    \n    // 如果当前路径没有对应的Tab，则添加一个\n    const existingTab = tabs.find(tab => tab.path === currentPath);\n    if (!existingTab) {\n      const newTab: TabItem = {\n        key: currentPath,\n        label: title,\n        path: currentPath,\n        closable: true, // 所有Tab都可以关闭\n      };\n      addTab(newTab);\n    } else if (activeKey !== existingTab.key) {\n      // 如果Tab已存在且不是当前活跃Tab，设置为活跃Tab\n      setActiveTab(existingTab.key);\n    }\n  }, [location.pathname, tabs, activeKey, addTab, setActiveTab]);\n\n  // 如果没有Tab，不显示TabBar\n  if (tabs.length === 0) {\n    return null;\n  }\n\n  return (\n    <>\n      <NotificationBar />\n      <TabBar\n        tabs={tabs}\n        activeKey={activeKey}\n        onTabChange={setActiveTab}\n        onTabClose={removeTab}\n      />\n      {/* 暂时注释掉Breadcrumb，看看是否是它导致的问题 */}\n      {/* <Breadcrumb /> */}\n    </>\n  );\n});\n\nexport default TabBarWrapper;\n"],"names":[],"mappings":"AAAA,WAAW,mBAAmB,CAC5B,uBACA;IACE,SAAS;;;;;;wCCuGb;;;2BAAA;;;;;;;oFA1GiC;wCACL;mFACI;+CACF;6FACF;;;;;;;;;;YAE5B,cAAc;YACd,MAAM,kBAA0C;gBAC9C,mBAAmB;gBACnB,qBAAqB;gBACrB,oBAAoB;gBACpB,0BAA0B;gBAC1B,2BAA2B;gBAC3B,sBAAsB;gBACtB,4BAA4B;gBAC5B,qBAAqB;gBACrB,qBAAqB;gBACrB,oBAAoB;gBACpB,mBAAmB;gBACnB,yBAAyB;gBACzB,oBAAoB;gBACpB,qBAAqB;gBACrB,qBAAqB;gBACrB,qBAAqB;gBACrB,oBAAoB;gBACpB,yBAAyB;gBACzB,sBAAsB;gBACtB,wBAAwB;gBACxB,wBAAwB;gBACxB,wBAAwB;gBACxB,uBAAuB;gBACvB,2BAA2B;gBAC3B,oBAAoB;gBACpB,wBAAwB;gBACxB,oBAAoB;gBACpB,kBAAkB;gBAClB,eAAe;gBACf,kBAAkB;gBAClB,yBAAyB;gBACzB,QAAQ;YACV;YAEA,MAAM,8BAA0B,GAAA,cAAK,CAAC,IAAI,SAAC;;gBACzC,MAAM,WAAW,IAAA,gBAAW;gBAC5B,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,SAAS,EAAE,YAAY,EAAE,GAAG,IAAA,yBAAa;gBAE1E,gBAAgB;gBAChB,IAAA,gBAAS,EAAC;oBACR,MAAM,cAAc,SAAS,QAAQ;oBAErC,gBAAgB;oBAChB,IAAI,gBAAgB,KAClB;oBAGF,iCAAiC;oBACjC,MAAM,YAAY,YAAY,QAAQ,CAAC,4BACtB,gBAAgB;oBAEjC,IAAI,WAAW;wBACb,yBAAyB;wBACzB,MAAM,UAAU,KAAK,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,KAAK;wBAC9C,IAAI,WAAW,cAAc,QAAQ,GAAG,EACtC,aAAa,QAAQ,GAAG;wBAE1B;oBACF;oBAEA,MAAM,QAAQ,eAAe,CAAC,YAAY,IAAI;oBAE9C,uBAAuB;oBACvB,MAAM,cAAc,KAAK,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,KAAK;oBAClD,IAAI,CAAC,aAAa;wBAChB,MAAM,SAAkB;4BACtB,KAAK;4BACL,OAAO;4BACP,MAAM;4BACN,UAAU;wBACZ;wBACA,OAAO;oBACT,OAAO,IAAI,cAAc,YAAY,GAAG,EACtC,8BAA8B;oBAC9B,aAAa,YAAY,GAAG;gBAEhC,GAAG;oBAAC,SAAS,QAAQ;oBAAE;oBAAM;oBAAW;oBAAQ;iBAAa;gBAE7D,oBAAoB;gBACpB,IAAI,KAAK,MAAM,KAAK,GAClB,OAAO;gBAGT,qBACE;;sCACE,2BAAC,wBAAe;;;;;sCAChB,2BAAC,cAAM;4BACL,MAAM;4BACN,WAAW;4BACX,aAAa;4BACb,YAAY;;;;;;;;YAMpB;;oBA7DmB,gBAAW;oBACiC,yBAAa;;;;oBADzD,gBAAW;oBACiC,yBAAa;;;;gBA8D5E,WAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;IDvGD;AACZ,GACA,SAAU,OAAO;IACf,QAAQ,EAAE,GAAC;IACf,QAAQ,gBAAgB,CAAC;QAAC,gCAA+B;YAAC;SAA+B;QAAC,qCAAoC;YAAC;YAAU;SAAoC;QAAC,uCAAsC;YAAC;YAAU;SAAsC;QAAC,qBAAoB;YAAC;SAAS;QAAC,uCAAsC;YAAC;SAA4B;QAAC,8BAA6B;YAAC;SAAmB;QAAC,kCAAiC;YAAC;SAAwB;IAAA;;AACnd"}