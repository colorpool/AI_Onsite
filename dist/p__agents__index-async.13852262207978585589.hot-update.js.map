{"version":3,"sources":["p__agents__index-async.13852262207978585589.hot-update.js","src/pages/agents/index.tsx"],"sourcesContent":["globalThis.makoModuleHotUpdate(\n  'p__agents__index',\n  {\n    modules: {},\n  },\n  function (runtime) {\n    runtime._h='8767809277585889247';\nruntime.updateEnsure2Map({\"src/.umi/core/EmptyRoute.tsx\":[\"src/.umi/core/EmptyRoute.tsx\"],\"src/.umi/plugin-layout/Layout.tsx\":[\"vendors\",\"src/.umi/plugin-layout/Layout.tsx\"],\"src/.umi/plugin-openapi/openapi.tsx\":[\"vendors\",\"src/.umi/plugin-openapi/openapi.tsx\"],\"src/pages/404.tsx\":[\"p__404\"],\"src/pages/CustomerSuccess/index.tsx\":[\"p__CustomerSuccess__index\"],\"src/pages/agents/index.tsx\":[\"p__agents__index\"],\"src/pages/user/login/index.tsx\":[\"p__user__login__index\"]});;\n  },\n);\n","import React, { useMemo, useState } from 'react';\nimport { Button, Row, Col, Typography, Input, Select, Space, Table, Tag } from 'antd';\nimport { PlusOutlined, AppstoreOutlined, UnorderedListOutlined } from '@ant-design/icons';\nimport { useNavigate, useLocation } from 'umi';\nimport AgentCard from '../../components/agents/AgentCard';\nimport { mockAgents } from '../../mock/agentData';\nimport AgentCreateForm from '../../components/agents/AgentCreateForm';\nimport { mockKnowledgeBases, mockAgentSkills } from '../../mock/agentData';\nimport { AgentCreateFormData } from '../../types/agent';\nimport { message } from 'antd';\nimport AgentEditPage from './[id]/edit';\nimport AgentAnalyticsPage from './[id]/analytics';\n\nconst { Title } = Typography;\n\nconst AgentsPage: React.FC = () => {\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const [viewMode, setViewMode] = useState<'card' | 'list'>('card');\n  const [searchText, setSearchText] = useState('');\n  const [channelFilter, setChannelFilter] = useState<string | undefined>(undefined);\n\n  const handleCreateAgent = () => {\n    navigate('/ai-tools/consultant/new');\n  };\n\n  const handleSubmit = (data: AgentCreateFormData) => {\n    // TODO: 实现创建Agent的API调用\n    console.log('Creating agent with data:', data);\n    \n    // 模拟API调用成功\n    message.success('分身创建成功！');\n    navigate('/ai-tools/consultant');\n  };\n\n  const handleCancel = () => {\n    navigate('/ai-tools/consultant');\n  };\n\n  // 根据当前路径决定显示什么内容\n  const pathname = location.pathname;\n  console.log('Current pathname:', pathname);\n  \n  // 如果是创建页面\n  if (pathname === '/ai-tools/consultant/new') {\n    return (\n      <div style={{ \n        padding: '24px',\n        background: '#fafafa',\n        minHeight: 'calc(100vh - 120px)'\n      }}>\n        <div style={{ \n          maxWidth: '1000px', \n          margin: '0 auto'\n        }}>\n          {/* 页面标题和返回按钮 */}\n          <div style={{ \n            display: 'flex', \n            alignItems: 'center', \n            marginBottom: '24px',\n            gap: '16px'\n          }}>\n            <Button \n              onClick={handleCancel}\n              style={{ border: 'none', padding: 0 }}\n            >\n              返回\n            </Button>\n            <Title level={3} style={{ margin: 0, color: '#262626', fontSize: '18px' }}>\n              创建新分身\n            </Title>\n          </div>\n\n          {/* 创建表单 */}\n          <AgentCreateForm\n            allKnowledgeBases={mockKnowledgeBases}\n            allAgentSkills={mockAgentSkills}\n            onSubmit={handleSubmit}\n            onCancel={handleCancel}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  // 如果是配置或分析页面\n  const editMatch = pathname.match(/\\/ai-tools\\/consultant\\/([^\\/]+)\\/edit/);\n  const analyticsMatch = pathname.match(/\\/ai-tools\\/consultant\\/([^\\/]+)\\/analytics/);\n  \n  if (editMatch || analyticsMatch) {\n    const agentId = editMatch ? editMatch[1] : analyticsMatch![1];\n    const isEdit = !!editMatch;\n    const agent = mockAgents.find(a => a.id === agentId);\n    \n    if (!agent) {\n      return <div>分身不存在</div>;\n    }\n\n    // 直接渲染对应的组件，传递必要的参数\n    if (isEdit) {\n      return <AgentEditPage agentId={agentId} />;\n    } else {\n      return <AgentAnalyticsPage agentId={agentId} />;\n    }\n  }\n\n  const filteredAgents = useMemo(() => {\n    return mockAgents.filter((a) => {\n      const matchName = a.name.includes(searchText) || a.role.includes(searchText);\n      const matchChannel = channelFilter ? a.deployedChannels.includes(channelFilter as any) : true;\n      return matchName && matchChannel;\n    });\n  }, [searchText, channelFilter]);\n\n  const listColumns = [\n    { title: '名称', dataIndex: 'name', key: 'name' },\n    { title: '角色', dataIndex: 'role', key: 'role' },\n    { title: '状态', dataIndex: 'status', key: 'status', render: (s: string) => <Tag>{s}</Tag> },\n    { title: '服务客户', dataIndex: ['metrics','servedCustomers'], key: 'servedCustomers' },\n    { title: '已解决', dataIndex: ['metrics','resolvedIssues'], key: 'resolvedIssues' },\n    { title: '转人工率', key: 'escalationRate', render: (_: any, r: any) => `${Math.round(r.metrics.escalationRate*100)}%` },\n    { title: '渠道', key: 'channels', render: (_: any, r: any) => r.deployedChannels.map((c: string) => <Tag key={c}>{c}</Tag>) },\n    { title: '操作', key: 'actions', render: (_: any, r: any) => (\n        <Space size=\"small\">\n          <Button size=\"small\" onClick={() => navigate(`/ai-tools/consultant/${r.id}/edit`)}>配置</Button>\n          <Button size=\"small\" onClick={() => navigate(`/ai-tools/consultant/${r.id}/analytics`)}>分析</Button>\n        </Space>\n      ) },\n  ];\n\n  const channelOptions = [\n    { label: '全部渠道', value: undefined },\n    { label: 'web-chat', value: 'web-chat' },\n    { label: 'wecom', value: 'wecom' },\n    { label: 'lark', value: 'lark' },\n  ];\n  return (\n    <div style={{ \n      padding: '24px',\n      background: '#fafafa',\n      minHeight: 'calc(100vh - 120px)'\n    }}>\n      <div style={{ \n        maxWidth: '1400px', \n        margin: '0 auto'\n      }}>\n        {/* 搜索 / 筛选 / 视图切换 / 创建 */}\n        <div style={{ \n          display: 'flex', \n          justifyContent: 'space-between', \n          alignItems: 'center', \n          marginBottom: '24px'\n        }}>\n          <Space size=\"middle\" wrap>\n            <Input \n              allowClear \n              placeholder=\"按名称/角色搜索\" \n              value={searchText}\n              onChange={(e) => setSearchText(e.target.value)}\n              style={{ width: 220 }}\n              size=\"middle\"\n            />\n            <Select\n              allowClear\n              placeholder=\"按渠道筛选\"\n              value={channelFilter as any}\n              onChange={(v) => setChannelFilter(v)}\n              options={channelOptions as any}\n              style={{ width: 180 }}\n              size=\"middle\"\n            />\n          </Space>\n\n          <Space size=\"small\">\n            <Button \n              icon={<AppstoreOutlined />} \n              type={viewMode==='card' ? 'primary' : 'default'}\n              size=\"middle\"\n              onClick={() => setViewMode('card')}\n            />\n            <Button \n              icon={<UnorderedListOutlined />} \n              type={viewMode==='list' ? 'primary' : 'default'}\n              size=\"middle\"\n              onClick={() => setViewMode('list')}\n            />\n            <Button \n              type=\"primary\" \n              icon={<PlusOutlined />}\n              size=\"middle\"\n              onClick={handleCreateAgent}\n              style={{ borderRadius: '6px', fontWeight: '500' }}\n            >创建新分身</Button>\n          </Space>\n        </div>\n\n        {viewMode === 'card' ? (\n          <Row gutter={[16, 16]}>\n            {filteredAgents.map((agent) => (\n              <Col key={agent.id} xs={24} sm={12} md={8} lg={6} xl={6}>\n                <AgentCard agent={agent} />\n              </Col>\n            ))}\n          </Row>\n        ) : (\n          <Table\n            rowKey=\"id\"\n            size=\"small\"\n            pagination={{ pageSize: 8 }}\n            dataSource={filteredAgents}\n            columns={listColumns as any}\n            style={{ background: '#fff', borderRadius: 8 }}\n          />\n        )}\n\n        {/* 空状态 */}\n        {mockAgents.length === 0 && (\n          <div style={{ \n            textAlign: 'center', \n            padding: '80px 20px',\n            color: '#999'\n          }}>\n            <div style={{ fontSize: '64px', marginBottom: '24px' }}>🤖</div>\n            <Title level={3} style={{ color: '#666', marginBottom: '16px' }}>\n              还没有创建任何分身\n            </Title>\n            <p style={{ fontSize: '16px', color: '#999', marginBottom: '32px' }}>\n              点击右上角的\"创建新分身\"按钮开始创建您的第一个AI助手\n            </p>\n            <Button \n              type=\"primary\" \n              icon={<PlusOutlined />}\n              onClick={handleCreateAgent}\n              size=\"large\"\n              style={{ \n                height: '48px',\n                borderRadius: '6px',\n                fontWeight: '500'\n              }}\n            >\n              创建第一个分身\n            </Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AgentsPage;\n"],"names":[],"mappings":"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"}