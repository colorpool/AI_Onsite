{"version":3,"sources":["umi.1141346331771527056.hot-update.js","src/app.tsx","src/utils/env.ts","src/services/ant-design-pro/api.ts"],"sourcesContent":["globalThis.makoModuleHotUpdate(\n  'src/.umi/umi.ts?hmr',\n  {\n    modules: {},\n  },\n  function (runtime) {\n    runtime._h='8401292661101862102';\nruntime.updateEnsure2Map({\"src/.umi/core/EmptyRoute.tsx\":[\"src/.umi/core/EmptyRoute.tsx\"],\"src/.umi/plugin-layout/Layout.tsx\":[\"vendors\",\"src/.umi/plugin-layout/Layout.tsx\"],\"src/.umi/plugin-openapi/openapi.tsx\":[\"vendors\",\"src/.umi/plugin-openapi/openapi.tsx\"],\"src/pages/404.tsx\":[\"p__404\"],\"src/pages/CustomerSuccess/index.tsx\":[\"common\",\"p__CustomerSuccess__index\"],\"src/pages/agents/index.tsx\":[\"p__agents__index\"],\"src/pages/handover/[id]/index.tsx\":[\"common\",\"p__handover__id__index\"],\"src/pages/handover/index.tsx\":[\"common\",\"p__handover__index\"],\"src/pages/handover/new/index.tsx\":[\"p__handover__new__index\"],\"src/pages/user/login/index.tsx\":[\"p__user__login__index\"]});;\n  },\n);\n","import { LinkOutlined } from '@ant-design/icons';\nimport type { Settings as LayoutSettings } from '@ant-design/pro-components';\nimport type { RequestConfig, RunTimeLayoutConfig } from '@umijs/max';\nimport { history, Link } from '@umijs/max';\nimport React from 'react';\nimport {\n  AvatarDropdown,\n  AvatarName,\n  Footer,\n  Question,\n  SelectLang,\n} from '@/components';\nimport { currentUser as queryCurrentUser } from '@/services/ant-design-pro/api';\nimport defaultSettings from '../config/defaultSettings';\nimport { errorConfig } from './requestErrorConfig';\nimport { TabProvider } from '@/contexts/TabContext';\nimport TabBarWrapper from '@/components/TabBar/TabBarWrapper';\nimport { useMenuState } from '@/hooks/useMenuState';\nimport { isProduction, getEnvironmentInfo } from '@/utils/env';\nimport { getMockCurrentUser } from '@/utils/mockData';\nimport '@ant-design/v5-patch-for-react-19';\n\nconst isDev = process.env.NODE_ENV === 'development';\nconst loginPath = '/user/login';\n\n/**\n * @see https://umijs.org/docs/api/runtime-config#getinitialstate\n * */\nexport async function getInitialState(): Promise<{\n  settings?: Partial<LayoutSettings>;\n  currentUser?: API.CurrentUser;\n  loading?: boolean;\n  fetchUserInfo?: () => Promise<API.CurrentUser | undefined>;\n}> {\n  const fetchUserInfo = async () => {\n    try {\n      const msg = await queryCurrentUser({\n        skipErrorHandler: true,\n      });\n      return msg.data;\n    } catch (_error) {\n      // 生产环境不跳转登录页面，直接返回Mock用户\n      if (isProduction) {\n        return {\n          name: '管理员',\n          avatar: 'https://gw.alipayobjects.com/zos/antfincdn/XAosXuNZyF/BiazfanxmamNRoxxVxka.png',\n          userid: '00000001',\n          email: 'admin@example.com',\n          signature: '海纳百川，有容乃大',\n          title: '交互专家',\n          group: '蚂蚁金服－某某某事业群－某某平台部－某某技术部－UED',\n          tags: [\n            {\n              key: '0',\n              label: '很有想法的',\n            },\n            {\n              key: '1',\n              label: '专注设计',\n            },\n            {\n              key: '2',\n              label: '辣~',\n            },\n            {\n              key: '3',\n              label: '大长腿',\n            },\n            {\n              key: '4',\n              label: '川妹子',\n            },\n            {\n              key: '5',\n              label: '海纳百川',\n            },\n          ],\n          notifyCount: 12,\n          unreadCount: 11,\n          country: 'China',\n          access: 'admin',\n          geographic: {\n            province: {\n              label: '浙江省',\n              key: '330000',\n            },\n            city: {\n              label: '杭州市',\n              key: '330100',\n            },\n          },\n          address: '西湖区工专路 77 号',\n          phone: '0752-268888888',\n        };\n      }\n      history.push(loginPath);\n    }\n    return undefined;\n  };\n  \n  // 生产环境直接返回用户信息，不检查路径\n  if (isProduction) {\n    const currentUser = await fetchUserInfo();\n    return {\n      fetchUserInfo,\n      currentUser,\n      settings: defaultSettings as Partial<LayoutSettings>,\n    };\n  }\n  \n  // 开发环境保持原有逻辑\n  const { location } = history;\n  if (\n    ![loginPath, '/user/register', '/user/register-result'].includes(\n      location.pathname,\n    )\n  ) {\n    const currentUser = await fetchUserInfo();\n    return {\n      fetchUserInfo,\n      currentUser,\n      settings: defaultSettings as Partial<LayoutSettings>,\n    };\n  }\n  return {\n    fetchUserInfo,\n    settings: defaultSettings as Partial<LayoutSettings>,\n  };\n}\n\n// ProLayout 支持的api https://procomponents.ant.design/components/layout\nexport const layout: RunTimeLayoutConfig = ({\n  initialState,\n  setInitialState,\n}) => {\n  return {\n    // 移除actionsRender，不再在顶部显示\n    // actionsRender: () => [\n    //   <Question key=\"doc\" />,\n    //   <SelectLang key=\"SelectLang\" />,\n    // ],\n    // 移除avatarProps，避免重复显示用户头像\n    // avatarProps: {\n    //   src: initialState?.currentUser?.avatar,\n    //   title: <AvatarName />,\n    //   render: (_, avatarChildren) => {\n    //     return <AvatarDropdown>{avatarChildren}</AvatarDropdown>;\n    //   },\n    // },\n    waterMarkProps: {\n      content: initialState?.currentUser?.name,\n    },\n    footerRender: () => <Footer />,\n    onPageChange: () => {\n      const { location } = history;\n      // 生产环境跳过登录检查\n      if (isProduction) {\n        return;\n      }\n      // 如果没有登录，重定向到 login\n      if (!initialState?.currentUser && location.pathname !== loginPath) {\n        history.push(loginPath);\n      }\n    },\n    bgLayoutImgList: [\n      {\n        src: 'https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/D2LWSqNny4sAAAAAAAAAAAAAFl94AQBr',\n        left: 85,\n        bottom: 100,\n        height: '303px',\n      },\n      {\n        src: 'https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/C2TWRpJpiC0AAAAAAAAAAAAAFl94AQBr',\n        bottom: -68,\n        right: -45,\n        height: '303px',\n      },\n      {\n        src: 'https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/F6vSTbj8KpYAAAAAAAAAAAAAFl94AQBr',\n        bottom: 0,\n        left: 0,\n        width: '331px',\n      },\n    ],\n    links: [], // 移除OpenAPI文档链接\n    menuHeaderRender: undefined,\n    // 自定义 403 页面\n    // unAccessible: <div>unAccessible</div>,\n    // 增加一个 loading 的状态\n    childrenRender: (children) => {\n      // if (initialState?.loading) return <PageLoading />;\n      return (\n        <TabProvider>\n          <div style={{ display: 'flex', flexDirection: 'column', height: '100vh' }}>\n            <div style={{ position: 'sticky', top: 0, zIndex: 1000, background: '#fff' }}>\n              <TabBarWrapper />\n            </div>\n            <div style={{ flex: 1, padding: 0 }}>\n              {children}\n            </div>\n          </div>\n\n        </TabProvider>\n      );\n    },\n    // 自定义侧边栏底部内容，包含用户头像和语言切换\n    siderMenuType: 'sub',\n    // 配置菜单属性，实现点击菜单时自动关闭其他菜单\n    menuProps: {\n      mode: 'inline',\n      onClick: (info) => {\n        // 这里可以添加自定义的点击处理逻辑\n        console.log('菜单点击:', info);\n      },\n    },\n    // 添加侧边栏底部自定义渲染\n    menuFooterRender: () => (\n      <div style={{ \n        padding: '16px', \n        borderTop: '1px solid #f0f0f0',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center'\n      }}>\n        <AvatarDropdown>\n          <div style={{ \n            display: 'flex', \n            alignItems: 'center', \n            gap: '8px',\n            cursor: 'pointer',\n            padding: '4px 8px',\n            borderRadius: '6px',\n            transition: 'background-color 0.2s'\n          }}>\n            <AvatarName />\n          </div>\n        </AvatarDropdown>\n      </div>\n    ),\n    ...initialState?.settings,\n  };\n};\n\n/**\n * @name request 配置，可以配置错误处理\n * 它基于 axios 和 ahooks 的 useRequest 提供了一套统一的网络请求和错误处理方案。\n * @doc https://umijs.org/docs/max/request#配置\n */\nexport const request: RequestConfig = {\n  baseURL: process.env.NODE_ENV === 'production' ? '' : 'https://proapi.azurewebsites.net',\n  ...errorConfig,\n};\n","// 环境检测工具\nexport const isProduction = () => {\n  // 在Vercel环境中，NODE_ENV 会被设置为 'production'\n  // 同时我们也检查 REACT_APP_ENV 环境变量\n  return process.env.NODE_ENV === 'production' || \n         process.env.REACT_APP_ENV === 'prod' ||\n         window.location.hostname.includes('vercel.app');\n};\n\nexport const isDevelopment = () => {\n  return process.env.NODE_ENV === 'development' || \n         process.env.REACT_APP_ENV === 'dev';\n};\n\n// 输出当前环境信息用于调试\nexport const getEnvironmentInfo = () => {\n  return {\n    NODE_ENV: process.env.NODE_ENV,\n    REACT_APP_ENV: process.env.REACT_APP_ENV,\n    hostname: typeof window !== 'undefined' ? window.location.hostname : 'unknown',\n    isProduction: isProduction(),\n    isDevelopment: isDevelopment(),\n  };\n};\n","// @ts-ignore\n/* eslint-disable */\nimport { request } from '@umijs/max';\n\n/** 获取当前的用户 GET /api/currentUser */\nexport async function currentUser(options?: { [key: string]: any }) {\n  return request<{\n    data: API.CurrentUser;\n  }>('/api/currentUser', {\n    method: 'GET',\n    ...(options || {}),\n  });\n}\n\n/** 退出登录接口 POST /api/login/outLogin */\nexport async function outLogin(options?: { [key: string]: any }) {\n  return request<Record<string, any>>('/api/login/outLogin', {\n    method: 'POST',\n    ...(options || {}),\n  });\n}\n\n/** 登录接口 POST /api/login/account */\nexport async function login(body: API.LoginParams, options?: { [key: string]: any }) {\n  return request<API.LoginResult>('/api/login/account', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    data: body,\n    ...(options || {}),\n  });\n}\n\n/** 此处后端没有提供注释 GET /api/notices */\nexport async function getNotices(options?: { [key: string]: any }) {\n  return request<API.NoticeIconList>('/api/notices', {\n    method: 'GET',\n    ...(options || {}),\n  });\n}\n\n/** 获取规则列表 GET /api/rule */\nexport async function rule(\n  params: {\n    // query\n    /** 当前的页码 */\n    current?: number;\n    /** 页面的容量 */\n    pageSize?: number;\n  },\n  options?: { [key: string]: any },\n) {\n  return request<API.RuleList>('/api/rule', {\n    method: 'GET',\n    params: {\n      ...params,\n    },\n    ...(options || {}),\n  });\n}\n\n/** 更新规则 PUT /api/rule */\nexport async function updateRule(options?: { [key: string]: any }) {\n  return request<API.RuleListItem>('/api/rule', {\n    method: 'POST',\n    data: {\n      method: 'update',\n      ...(options || {}),\n    },\n  });\n}\n\n/** 新建规则 POST /api/rule */\nexport async function addRule(options?: { [key: string]: any }) {\n  return request<API.RuleListItem>('/api/rule', {\n    method: 'POST',\n    data: {\n      method: 'post',\n      ...(options || {}),\n    },\n  });\n}\n\n/** 删除规则 DELETE /api/rule */\nexport async function removeRule(options?: { [key: string]: any }) {\n  return request<Record<string, any>>('/api/rule', {\n    method: 'POST',\n    data: {\n      method: 'delete',\n      ...(options || {}),\n    },\n  });\n}\n"],"names":[],"mappings":"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"}